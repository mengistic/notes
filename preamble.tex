
\documentclass[a4paper, 10pt]{memoir}
% ==> math
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{mathtools}

\mathtoolsset{centercolon} % not work when using |mathpazo|
\DeclarePairedDelimiter\abs{\lvert}{\rvert}
\DeclarePairedDelimiterX\norm[1]\lVert\rVert{
	\ifblank{#1}{\:\cdot\:}{#1}
}
\def\set#1#2{\left\{#1 ~:~ #2\right\}}
\def\permil{\text{\hskip 0.3pt\englishfont\textperthousand}}


\DeclareMathOperator{\arccot}{cot}
\DeclareMathOperator{\arcsec}{arcsec}
\DeclareMathOperator{\arccsc}{arccsc}
\DeclareMathOperator{\lcm}{lcm}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\sym}{sym}
\DeclareMathOperator{\tr}{trace}


\def\N{\mathbb{N}}
\def\Z{\mathbb{Z}}
\def\Q{\mathbb{Q}}
\def\R{\mathbb{R}}
\def\C{\mathbb{C}}
\def\F{\mathbb{F}}
\def\P{\mathbb{P}}
\def\labelitemi{$\circ$}
\def\inv{^{-1}}
\def\ang#1{\left\langle#1\right\rangle}
\def\tran{^\mathrm{T}}
\renewcommand{\vec}[1]{\mathbf{#1}}

\theoremstyle{definition}
\newtheorem{definition}{Definition}[chapter]
\newtheorem{axiom}[definition]{Axiom}
\newtheorem{exercise}{Exercise}[section]
\newtheorem{example}[exercise]{Example}
\newtheorem{homework}{Homework}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}

\theoremstyle{remark}
\newtheorem{corollary}{Corollary}
\newtheorem{claim}{Claim}


% <== end: math
% ==> figure, geometry
\usepackage{tikz}
\usetikzlibrary{arrows, calc, angles, quotes}
% <==
% ==> language
\usepackage[no-math]{fontspec}
\usepackage{mathpazo}
\setmainfont{TeX Gyre Pagella}
% <== 
% ==> enumerate
\usepackage{enumitem}
\usepackage{multicol}
% <==
% ==> listings
\usepackage{xcolor}
\usepackage{listings}
% ==> basic
\lstset{%
	basicstyle=\small\ttfamily,
	keywordstyle=\color{black},
	commentstyle=\color{gray},
	keywordstyle=[1]{\color{blue!90!black}},
	keywordstyle=[2]{\color{magenta!90!black}},
	keywordstyle=[3]{\color{red!60!orange}},
	keywordstyle=[4]{\color{teal}},
  keywordstyle=[5]{\color{magenta!90!black}}, % <-- otherkeywords, BUG
	commentstyle=\color{gray},
	stringstyle=\color{green!60!black},
	tabsize=2,
	%
	numbers=left,
	numberstyle=\tiny\color{blue!70!gray},
	stepnumber=1,
	%
	frame=Lt,
	breaklines=true,
	xleftmargin=0cm,
	rulecolor=\color{gray!50!black},
	aboveskip=0.5cm,
	belowskip=0.5cm
}
% <==
% ==> code c
\lstdefinelanguage{cmeng}{
  morekeywords={
    auto,break,case,char,const,continue,default,do,double,%
    else,enum,extern,float,for,goto,if,int,long,register,return,%
    short,signed,sizeof,static,struct,switch,typedef,union,unsigned,%
    void,volatile,while},%
  morekeywords=[2]{
    printf, scanf,  include
  },
  otherkeywords={\#,<,>,\&},
  morekeywords=[5]{\#,<,>,\&},
  sensitive,%
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/},
	morestring=[b]',
	morestring=[b]",
}
% <==
% ==> code python
\lstdefinelanguage{py}{
	morekeywords={
		access,and,as,break,class,continue,def,del,elif,else,
		except,exec,finally,for,from,global,if,import,in,is,lambda,
		not,or,pass,print,raise,return,try,while},
	% Built-ins
	morekeywords=[2]{
		abs,all,any,basestring,bin,bool,bytearray,
		callable,chr,classmethod,cmp,compile,complex,delattr,dict,dir,
		divmod,enumerate,eval,execfile,file,filter,float,format,
		frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,
		isinstance,issubclass,iter,len,list,locals,long,map,max,
		memoryview,min,next,object,oct,open,ord,pow,property,range,
		raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,
		sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,
		vars,xrange,zip,apply,buffer,coerce,intern,True,False},
	%
	morecomment=[l]\#,%
	morestring=[b]',%
	morestring=[b]",%
	morecomment=[s]{'''}{'''},% used for documentation text
	%                         % (mulitiline strings)
	morecomment=[s]{"""}{"""},% added by Philipp Matthias Hahn
	morestring=[s]{r'}{'},% `raw' strings
	morestring=[s]{r"}{"},%
	morestring=[s]{r'''}{'''},%
	morestring=[s]{r"""}{"""},%
	morestring=[s]{u'}{'},% unicode strings
	morestring=[s]{u"}{"},%
	morestring=[s]{u'''}{'''},%
	morestring=[s]{u"""}{"""},%
	%
	sensitive=true,%
}
% <==
% ==> code asy
\lstdefinelanguage{asy}{ %% Added by Sivmeng HUN
	morekeywords=[1]{
		import, for, if, else,new, do,and, access,
		from, while, break, continue, unravel, 
		operator, include, return},
	morekeywords=[2]{
		struct,typedef,static,public,readable,private,explicit,
		void,bool,int,real,string,var,picture,
		pair, path, pair3, path3, triple, transform, guide, pen, frame
	},
	morekeywords=[3]{
		true,false,and,cycle,controls,tension,atleast,
		curl,null,nullframe,nullpath,
		currentpicture,currentpen,currentprojection,
		inch,inches,cm,mm,pt,bp,up,down,right,left,
		E,N,S,W,NE,NW,SE,SW,
		solid,dashed,dashdotted,longdashed,longdashdotted,
		squarecap,roundcap,extendcap,miterjoin,roundjoin,
		beveljoin,zerowinding,evenodd,invisible
	},
	morekeywords=[4]{
		size,unitsize,draw,dot,label,
		sqrt,sin,cos,tan,cot,Sin,Cos,Tan,Cot,
		graph,
	},
	%
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/},
	morestring=[b]',
	morestring=[b]",
	%
}
% <==
% <==
% ==> tweaking memoir
\makepagestyle{myruled}
\makeheadrule {myruled}{\textwidth}{\normalrulethickness}
\makefootrule {myruled}{\textwidth}{\normalrulethickness}{\footruleskip}
\makeevenhead {myruled}{}{\small\itshape\leftmark} {}
\makeoddhead  {myruled}{}{\small\itshape\rightmark}{}
\makeevenfoot {myruled}{}{\small \thepage} {}
\makeoddfoot  {myruled}{}{\small \thepage} {}

\makeatletter % because of \@chapapp
\makepsmarks{myruled}{
  \nouppercaseheads
  \createmark{chapter}{both}{shownumber}{\@chapapp\ }{. \ }
  \createmark{section}{right}{shownumber}{}{. \ }
  \createmark{subsection}{right}{shownumber}{}{. \ }
  \createmark{subsubsection}{right}{shownumber}{}{. \ }
  \createplainmark {toc} {both} {\contentsname} 
  \createplainmark {lof} {both} {\listfigurename}
  \createplainmark {lot} {both} {\listtablename} 
  \createplainmark {bib} {both} {\bibname} 
  \createplainmark {index} {both} {\indexname} 
  \createplainmark {glossary} {both} {\glossaryname}
}
\makeatother
\setsecnumdepth{subsubsection}
\pagestyle{myruled}
% <==
% ==> page setup
\author{Sivmeng}
% <==
